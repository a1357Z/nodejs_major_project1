<div class="posts-list-container">
    <h1>Posts are </h1>
    <ul> 
        <%post.forEach(p=>{%>
            <li id="post-<%=p._id%>">
                <%if(locals.user && (p.user.id == locals.user.id)){%>
                    <a class="delete-post-button" href="/posts/delete/<%=p._id%>"> Delete Post</a>
                <%}%>
                <p>
                    <%=p.content%>
                </p>
                <small><span>Author is :</span><%=p.user.name%></small>
                
                
                <%if(locals.user){%>
                    
                    <div class="commment-container">
                        <form action="/comments/create" method="POST">
                            <input type="text" name="comment" placeholder="comment here" required>
                            <input type="hidden" name="post" value=<%=p._id%>>
                            <input type="submit"  >
                        </form>
                    </div>
                
                <%}%>
                <div class="post-comments-list" id="comments-<%=p._id%>">
                    <%p.comments.forEach(comment=>{%>
                        <p id="comment-<%=comment.id%>">
                            <%=comment.comment%> by : <%=comment.user.name%>
                            <%if(locals.user && locals.user.id == comment.user.id){%>
                                <span><a href="/comments/delete/<%=comment.id%>" class="delete-comment">delete comment</a></span> 
                            <%}%>
                             
                        </p>
                    <%})%>
                </div>
            </li>
            
            
       <% })%>
    </ul>
</div>
